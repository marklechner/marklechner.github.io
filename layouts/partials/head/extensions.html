<!-- Mermaid support -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    mermaid.initialize({
      startOnLoad: false,
      theme: 'dark',
      themeVariables: {
        primaryColor: '#4a90e2',
        primaryTextColor: '#ffffff',
        primaryBorderColor: '#ffffff',
        lineColor: '#ffffff',
        sectionBkgColor: '#2d3748',
        altSectionBkgColor: '#4a5568',
        gridColor: '#718096',
        secondaryColor: '#68d391',
        tertiaryColor: '#ffffff',
        background: '#1a202c',
        mainBkg: '#2d3748',
        secondBkg: '#4a5568',
        tertiaryBkg: '#718096'
      }
    });
    
    // Find all code blocks with language 'mermaid' and render them
    document.querySelectorAll('pre code.language-mermaid').forEach(function(element) {
      const graphDefinition = element.textContent;
      const graphDiv = document.createElement('div');
      graphDiv.className = 'mermaid';
      graphDiv.textContent = graphDefinition;
      element.parentNode.replaceWith(graphDiv);
    });
    
    mermaid.run();
  });
</script>
